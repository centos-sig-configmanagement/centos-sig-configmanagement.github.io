<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN"
  "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">


<html xmlns="http://www.w3.org/1999/xhtml">
  <head>
    <meta http-equiv="Content-Type" content="text/html; charset=utf-8" />
    
    <title>Testing spec files &#8212; CentOS Config Management SIG 2016 documentation</title>
    
    <link rel="stylesheet" href="_static/centos.css" type="text/css" />
    <link rel="stylesheet" href="_static/pygments.css" type="text/css" />
    
    <script type="text/javascript">
      var DOCUMENTATION_OPTIONS = {
        URL_ROOT:    './',
        VERSION:     '2016',
        COLLAPSE_INDEX: false,
        FILE_SUFFIX: '.html',
        HAS_SOURCE:  true
      };
    </script>
    <script type="text/javascript" src="_static/jquery.js"></script>
    <script type="text/javascript" src="_static/underscore.js"></script>
    <script type="text/javascript" src="_static/doctools.js"></script>
    <link rel="index" title="Index" href="genindex.html" />
    <link rel="search" title="Search" href="search.html" />
    <link rel="copyright" title="Copyright" href="copyright.html" />
    <link rel="top" title="CentOS Config Management SIG 2016 documentation" href="index.html" />
    <link rel="next" title="Legal notice" href="copyright.html" />
    <link rel="prev" title="Github project settings" href="githubrepo.html" /> 
  </head>
  <body role="document">
    <div class="related" role="navigation" aria-label="related navigation">
      <h3>Navigation</h3>
      <ul>
        <li class="right" style="margin-right: 10px">
          <a href="genindex.html" title="General Index"
             accesskey="I">index</a></li>
        <li class="right" >
          <a href="copyright.html" title="Legal notice"
             accesskey="N">next</a> |</li>
        <li class="right" >
          <a href="githubrepo.html" title="Github project settings"
             accesskey="P">previous</a> |</li>
        <li class="nav-item nav-item-0"><a href="index.html">CentOS Config Management SIG 2016 documentation</a> &#187;</li> 
      </ul>
    </div>  

    <div class="document">
      <div class="documentwrapper">
        <div class="bodywrapper">
          <div class="body" role="main">
            
  <div class="section" id="testing-spec-files">
<span id="testing-spec-files"></span><h1>Testing spec files<a class="headerlink" href="#testing-spec-files" title="Permalink to this headline">Â¶</a></h1>
<p>Here are the steps we do when we test a spec file</p>
<ol>
<li><p class="first">We build a Source RPM</p>
<p>The Source RPM (SRPM) is built on a fresh machine, then it is fetched in the
Jenkins workspace.</p>
</li>
<li><p class="first">We make a scratch build on CBS</p>
<p>Scratch builds allows us to ensure that the spec file is correct. It does
not help us to make a good package, because scratch builds do not rebuild
the SRPM first (<a class="reference external" href="https://fedoraproject.org/wiki/Using_the_Koji_build_system#Scratch_Builds">source</a>).</p>
</li>
<li><p class="first">We change the Release and Provides in the spec file</p>
<p>We change the spec file in order to be able to publish the RPM in koji. We
use the Jenkins build number and pull request as identifier (release field).
That ensures that we can rebuild the same pull request multiples times
without the need to change the release first.</p>
<p>Also, it makes it clear that the package is made out of a pull request and is
not a final rpm.</p>
</li>
<li><p class="first">We make a candidate build &#8211; identified by the Jenkins job numer and pull
request id.</p>
<p>The candidate build has several advantages:</p>
<ul class="simple">
<li>At that time, the SRPM itself is rebuild.</li>
<li>Inside the job, we can do &#8220;yum install package-pull-request(pull request
id and job id). That way, we know that we fetch exactly the package that
we need.</li>
</ul>
</li>
</ol>
</div>


          </div>
        </div>
      </div>
      <div class="sphinxsidebar" role="navigation" aria-label="main navigation">
        <div class="sphinxsidebarwrapper">
  <h4>Previous topic</h4>
  <p class="topless"><a href="githubrepo.html"
                        title="previous chapter">Github project settings</a></p>
  <h4>Next topic</h4>
  <p class="topless"><a href="copyright.html"
                        title="next chapter">Legal notice</a></p>
  <div role="note" aria-label="source link">
    <h3>This Page</h3>
    <ul class="this-page-menu">
      <li><a href="_sources/testing.txt"
            rel="nofollow">Show Source</a></li>
    </ul>
   </div>
<div id="searchbox" style="display: none" role="search">
  <h3>Quick search</h3>
    <form class="search" action="search.html" method="get">
      <div><input type="text" name="q" /></div>
      <div><input type="submit" value="Go" /></div>
      <input type="hidden" name="check_keywords" value="yes" />
      <input type="hidden" name="area" value="default" />
    </form>
</div>
<script type="text/javascript">$('#searchbox').show(0);</script>
        </div>
      </div>
      <div class="clearer"></div>
    </div>
    <div class="related" role="navigation" aria-label="related navigation">
      <h3>Navigation</h3>
      <ul>
        <li class="right" style="margin-right: 10px">
          <a href="genindex.html" title="General Index"
             >index</a></li>
        <li class="right" >
          <a href="copyright.html" title="Legal notice"
             >next</a> |</li>
        <li class="right" >
          <a href="githubrepo.html" title="Github project settings"
             >previous</a> |</li>
        <li class="nav-item nav-item-0"><a href="index.html">CentOS Config Management SIG 2016 documentation</a> &#187;</li> 
      </ul>
    </div>
    <div class="footer" role="contentinfo">
        &#169; <a href="copyright.html">Copyright</a> 2016, Julien Pivotto, The CentOS Project, and others.
      Created using <a href="http://sphinx-doc.org/">Sphinx</a> 1.4.8.
    </div>
  </body>
</html>